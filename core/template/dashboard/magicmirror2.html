<div id="plugin_container" class="eqLogic-widget eqLogic allowResize" style="width:#width#;height:#height#;border:#border#;border-radius:#border-radius#;background-color: #background-color#;color: #color#; #style#" data-category="" data-eqLogic_id="#id#" data-version="#version#" >
	<span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_cmd_id#"><i class="fas fa-sync"></i></span>
	<center class="widget-name"><strong><a href="#eqLink#" style="font-size : 1.1em;#hideEqLogicName#">#name_display#</strong></a>
	</center>
	<script>
		var cmd = $('.cmd[data-cmd_id=#refresh_cmd_id#]');
		if ('#refresh_cmd_id#' != '' && '#refresh_cmd_isVisible#' != '0'){
			$('.eqLogic[data-eqLogic_id=#id#] .refresh').on('click', function () {
				jeedom.cmd.execute({id: '#refresh_cmd_id#'});
			});
		}else{
			$('.eqLogic[data-eqLogic_uid=#id#] .refresh').remove();
			cmd.hide();
		}
	</script>
	<center>

<!-- Général Status -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_status#" data-cmd_uid="cmd#wdgtCmd_id_status##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_status#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-question'></i></span>
		  </div>
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_status#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_status#]');
			  cmd.attr('title','Ouvrir la page de ce MagicMirror²');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				if ('#wdgtCmd_value_status#' == '0') {
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.show();
					cmd.find('.iconCmd').empty().append("<i class='fas fa-check'></i>");
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_status#']({display_value:'#wdgtCmd_isVisible_status#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_status##uid#] .iconCmd').off().on('click', function () {
			  //jeedom.cmd.execute({id: '#wdgtCmd_id_status#'});
			  window.open("http://#magic_url#:#magic_customport#/");			  
			});
		  </script>
		</div>

<!-- REMOTE.HTML -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_remotePage#" data-cmd_uid="cmd#wdgtCmd_id_remotePage##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_remotePage#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-question'></i></span>
		  </div>
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_remotePage#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_remotePage#]');
			  cmd.attr('title','Accéder à la page REMOTE de ce MagicMirror²');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				if ('#wdgtCmd_value_status#' == '0') {
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.show();
					cmd.find('.iconCmd').empty().append("<i class='fas fa-external-link-alt'></i>");
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_remotePage#']({display_value:'#wdgtCmd_isVisible_remotePage#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_remotePage##uid#] .iconCmd').off().on('click', function () {
			  //jeedom.cmd.execute({id: '#wdgtCmd_id_status#'});
			  window.open("http://#magic_url#:#magic_customport#/remote.html");			  
			});
		  </script>
		</div>
		
<!-- POWEROFF -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_poweroff#" data-cmd_uid="cmd#wdgtCmd_id_poweroff##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_poweroff#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-question'></i></span>
		  </div>
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_poweroff#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_poweroff#]');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				if ('#wdgtCmd_value_status#' == '0') {
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.show();
					cmd.find('.iconCmd').empty().append("<i class='fas fa-power-off'></i>");
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_poweroff#']({display_value:'#wdgtCmd_isVisible_poweroff#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_poweroff##uid#] .iconCmd').off().on('click', function () {
				if('#wdgtCmd_value_status#' != '0'){
					bootbox.confirm('{{Voulez-vous vraiment éteindre l\'équipement MagicMirror2 ?}}', function (result) {
					if (result) {
						jeedom.cmd.execute({id: '#wdgtCmd_id_poweroff#'});
					}
					});
				}
			});
		  </script>
		</div>
		
<!-- RESTART -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_restart#" data-cmd_uid="cmd#wdgtCmd_id_restart##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_restart#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-redo-alt'></i></span>
		  </div>
		</div>
		  <input type="hidden" id="cmdRestartId" value="#wdgtCmd_id_restart#">
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_restart#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_restart#]');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				cmd.show();
				if('#wdgtCmd_value_status#' == '0'){
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.find('.iconCmd').empty().append("<i class='fas fa-redo-alt'></i>");
				}
			  } else {
				cmd.hide();
			  } 
			}
			jeedom.cmd.update['#wdgtCmd_id_restart#']({display_value:'#wdgtCmd_isVisible_restart#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_restart##uid#] .iconCmd').off().on('click', function () {
				if('#wdgtCmd_value_status#' != '0'){
					bootbox.confirm('{{Voulez-vous vraiment redémarer l\'équipement MagicMirror2 ?}}', function (result) {
					if (result) {
						jeedom.cmd.execute({id: '#wdgtCmd_id_restart#'});
					}
					});
			}
			});

		  </script>

<!-- RELOAD -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_reload#" data-cmd_uid="cmd#wdgtCmd_id_reload##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_reload#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-times'></i></span>
		  </div>
		  <input type="hidden" id="cmdReloadId" value="#wdgtCmd_id_reload#">
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_reload#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_reload#]');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				cmd.show();
				if('#wdgtCmd_value_status#' == '0'){
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.find('.iconCmd').empty().append("<i class='fas fa-sync-alt'></i>");
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_reload#']({display_value:'#wdgtCmd_isVisible_reload#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_reload##uid#] .iconCmd').off().on('click', function () {
				if('#wdgtCmd_value_status#' != '0'){
					bootbox.confirm('{{Voulez-vous vraiment <b>recharger</b> le programme MagicMirror2 ?}}', function (result) {
					if (result) {
						jeedom.cmd.execute({id: '#wdgtCmd_id_reload#'});
					}
					});
				}
			});
		  </script>
		</div>

<!-- REFRESH -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_refreshHtml#" data-cmd_uid="cmd#wdgtCmd_id_refreshHtml##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_refreshHtml#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-times'></i></span>
		  </div>
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_refreshHtml#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_refreshHtml#]');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				cmd.show();
				if('#wdgtCmd_value_status#' == '0'){
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.find('.iconCmd').empty().append("<i class='fas fa-recycle'></i>");
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_refreshHtml#']({display_value:'#wdgtCmd_isVisible_refreshHtml#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_refreshHtml##uid#] .iconCmd').off().on('click', function () {
				if('#wdgtCmd_value_status#' != '0'){
					jeedom.cmd.execute({id: '#wdgtCmd_id_refreshHtml#'});
				}
			});
		  </script>
		</div>
		
<!-- MONITOR STATUS -->	
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_monitorstatus#" data-cmd_uid="cmd#wdgtCmd_id_monitorstatus##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_monitorstatus#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-times'></i></span>
		  </div>
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_monitorstatus#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_monitorstatus#]');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				if ('#wdgtCmd_value_status#' == '0') {
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.show();
					switch ('#wdgtCmd_value_monitorstatus#') {
						case '0':
							cmd.find('.iconCmd').empty().append("<i class='fas fa-eye-slash'></i>");
							break;
						case '1':
							cmd.find('.iconCmd').empty().append("<i class='fas fa-eye'></i>");
							break;
						case '2':
							cmd.find('.iconCmd').empty().append("<i class='fas fa-exclamation'></i>");
							cmd.attr('title','Commande désactivée, il semble y avoir un problème.');
							break;
						default:
							cmd.find('.iconCmd').empty().append("<i class='fas fa-question'></i>");
					}
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_monitorstatus#']({display_value:'#wdgtCmd_isVisible_monitorstatus#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_monitorstatus##uid#] .iconCmd').off().on('click', function () {
			if('#wdgtCmd_value_status#' != '0' && '#wdgtCmd_isVisible_monitortoggle#' == '1' && "#wdgtCmd_value_monitorstatus#" != 2){
				jeedom.cmd.execute({id: '#wdgtCmd_id_monitorstatus#'});
			}else{
				//alert("Action désactivée !");
			}
			});
		  </script>
		</div>

<!-- BACKGROUND STATUS -->
		<div class="cmd cmd-widget cursor" data-type="action" data-subtype="other" data-template="tmplicon" data-cmd_id="#wdgtCmd_id_backgroundstatus#" data-cmd_uid="cmd#wdgtCmd_id_backgroundstatus##uid#" data-version="#version#" data-eqlogic_id="8">
		  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_backgroundstatus#</div>
		  </div>
		  <div class="content-sm ">
			<span class="iconCmd"><i class='fas fa-times'></i></span>
		  </div>
		  <script>
			jeedom.cmd.update['#wdgtCmd_id_backgroundstatus#'] = function(_options){
			  var cmd = $('.cmd[data-cmd_id=#wdgtCmd_id_backgroundstatus#]');
			  if (_options.display_value == '1' || _options.display_value >= 1 || _options.display_value == '99' || _options.display_value == 'on') {
				if ('#wdgtCmd_value_status#' == '0') {
					cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>");
				}else{
					cmd.show();
					switch ('#wdgtCmd_value_backgroundstatus#') { //metre +0 pour contourner le probleme temporaire !
						case '0':
							cmd.find('.iconCmd').empty().append("<i class='fas fa-ban'></i>");
							break;
						case '1':
							cmd.find('.iconCmd').empty().append("<i class='fas fa-image'></i>");
							break;
						case '2':
							cmd.find('.iconCmd').empty().append("<i class='fas fa-exclamation'></i>");
							cmd.attr('title','Commande désactivée, il semble y avoir un problème.');
							break;
						default:
							cmd.find('.iconCmd').empty().append("<i class='fas fa-question'></i>");
					}
				}
			  } else {
				cmd.hide();
			  }
			}
			jeedom.cmd.update['#wdgtCmd_id_backgroundstatus#']({display_value:'#wdgtCmd_isVisible_backgroundstatus#'});
			$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_backgroundstatus##uid#] .iconCmd').off().on('click', function () {
			if("#wdgtCmd_isVisible_backgroundtoggle#" == '1' && "#wdgtCmd_value_backgroundstatus#" != 2){
				jeedom.cmd.execute({id: '#wdgtCmd_id_backgroundstatus#'});
			}else{
				//alert("Action désactivée !");
			}
			});
		  </script>
		</div>

<!-- SLIDER -->

<div class="cmd cmd-widget " data-type="action" data-subtype="numeric" data-template="tmplicon" data-cmd_id="#wgtCmd_id_brightness#" data-cmd_uid="cmd#wgtCmd_id_brightness#__#uid#__" data-version="dashboard" data-eqlogic_id="20">
  <div class="title ">
    <div class="cmdName">#wdgtCmd_name_brightness# (#wdgtCmd_brightness_value#)</div>
  </div>
  <!--<div class="content-sm ">
    <span class="cursor iconCmdcmd#wgtCmd_id_brightness#__#uid#__ iconCmd" data-state="off"><i class="icon jeedom-lumiere-off"></i></span>
  </div>-->
  <div class="stateicon content-sm ">
	<span class="iconCmd"><i class='fas fa-times'></i></span>
  </div>
  <div class="value">
    <div class="slider ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content slider#wgtCmd_id_brightness##uid# sliderValue" value="#wgtCmd_brightness_value#">
      <span class="valuecmd#wgtCmd_id_brightness#__#uid#__ sliderValue"></span>
    <div class="ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min" style="width: 0%;"></div><span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default" style="left: 0%;"></span></div>
    
  </div>
  <script>
    jeedom.cmd.update['#wgtCmd_id_brightness#'] = function(_options){
      var cmd = $('.cmd[data-cmd_id=#wgtCmd_id_brightness#]');
      if('#_time_widget_#' == '1'){
        jeedom.cmd.displayDuration(_options.valueDate,  cmd.find('.timeCmd'));
      }else{
        cmd.find('.timeCmd').remove();
      }
      var minValue = ('10' == '') ? 10 : parseInt('10');
      var maxValue = ('100' == '') ? 100 : parseInt('100');
      var stateValue = ('#wdgtCmd_brightness_value#' == '') ? 0 : parseInt(_options.display_value);
      cmd.find('.slider').slider({
        min: minValue,
        max: maxValue,
        value: stateValue,
		step: 10,
        range: "min",
        animate: false,
        slide: function(event, ui) {
          $(".valuecmd#wgtCmd_id_brightness#__#uid#__").show();
          $(".valuecmd#wgtCmd_id_brightness#__#uid#__").html(ui.value);
        }
      });
	  
	  if('#wdgtCmd_value_status#' == 0) {
		cmd.find('.iconCmd').empty().append("<i class='fas fa-times'></i>").attr('data-state', 'on');
		cmd.find('.stateicon').show();
		$('.slider#wgtCmd_id_brightness##uid#').hide();
	  }else{
		cmd.find('.stateicon').empty();
		cmd.find('.stateicon').hide();
	  }
	  
	  
     /* if (stateValue > minValue) { 
        cmd.find('.iconCmd').empty().append("<i class='icon_yellow icon jeedom-lumiere-on'></i>").attr('data-state', 'on');
      }else {
        cmd.find('.iconCmd').empty().append("<i class='icon jeedom-lumiere-off'></i>").attr('data-state', 'off');
      }*/
    }
    jeedom.cmd.update['#wgtCmd_id_brightness#']({display_value:'#wdgtCmd_brightness_value#',valueDate:'2021-07-10 20:05:42',collectDate:'2021-07-10 20:05:42',alertLevel:'none'});
    $(".cmd[data-cmd_uid=cmd#wgtCmd_id_brightness#__#uid#__] .slider").on('slidestop', function (event,ui) {
      jeedom.cmd.execute({id: '#wgtCmd_id_brightness#', value: {slider: ui.value}});
      $(".valuecmd#wgtCmd_id_brightness#__#uid#__").hide();
    });
  </script>
</div>
		
<!-- NOTIFICATION -->
		<div class="">
				<center>
					<div class="cmd cmd-widget reportModeHidden" data-type="action" data-subtype="message" data-template="default" data-cmd_id="#wdgtCmd_id_notification#" data-cmd_uid="cmd#wdgtCmd_id_notification##uid#" data-version="#version#" data-eqlogic_id="21">
			<div class="content-lg notificationCmd">
			  <div class="title ">
			<div class="cmdName">#wdgtCmd_name_notification#</div>
		  </div>
				<input class="form-control input-sm paramTitle" placeholder="Titre" data-cmd_id="#wdgtCmd_id_notification#">
				<textarea class="form-control input-sm message" rows="2" placeholder="Message" data-cmd_uid="cmd#wdgtCmd_id_notification##uid#" data-cmd_id="#wdgtCmd_id_notification#"></textarea>
				<a class="btn btn-xs execute">Notification</a>
			</div>
			<script>
				if('#wdgtCmd_isVisible_notification#' == '0'){
					$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_notification##uid#] .notificationCmd').hide();
				}
				if('#wdgtCmd_isVisible_notification#' == '1'){
					$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_notification##uid#] .notificationCmd').show();
				}
				$('.cmd[data-cmd_uid=cmd#wdgtCmd_id_notification##uid#] .execute').on('click', function() {
					jeedom.cmd.execute({id: '#wdgtCmd_id_notification#', value: {title: $('.cmd[data-cmd_uid=cmd#wdgtCmd_id_notification##uid#] .paramTitle').value(), message: $('.cmd[data-cmd_uid=cmd#wdgtCmd_id_notification##uid#] .message').value()}});
				});
			</script>
		</div>

	</center>
	</div>
	</center>
</div>